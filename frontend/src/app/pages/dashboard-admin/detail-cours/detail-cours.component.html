<div class="detail-wrapper">
  <!-- HERO HEADER SECTION -->
  <div class="hero-section">
    <div class="hero-background">
      <div class="hero-gradient"></div>
    </div>
    
    <div class="hero-content">
      <button class="btn-back" (click)="retourCours()">
        <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
        Retour
      </button>
      
      <div class="hero-header">
        <div class="hero-text">
          <h1 class="hero-title">{{ cours.titre }}</h1>
          <p class="hero-description">Gestion du contenu p√©dagogique</p>
        </div>
        
        <div class="course-stats">
          <div class="stat-card">
            <span class="stat-icon">üìö</span>
            <div class="stat-info">
              <p class="stat-label">Ressources</p>
              <p class="stat-value">{{ cours.ressources.length }}</p>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">‚ùì</span>
            <div class="stat-info">
              <p class="stat-label">Quiz</p>
              <p class="stat-value">{{ cours.quiz.length }}</p>
            </div>
          </div>
          <div class="stat-card">
            <span class="stat-icon">üìù</span>
            <div class="stat-info">
              <p class="stat-label">Examens</p>
              <p class="stat-value">{{ cours.examens.length }}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="course-meta-enhanced">
        <div class="meta-item">
          <svg class="meta-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          <span class="meta-label">Enseignant:</span>
          <span class="meta-value">{{ cours.enseignant?.nom }}</span>
        </div>
        <div class="meta-item">
          <svg class="meta-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"/>
          </svg>
          <span class="meta-label">Mati√®re:</span>
          <span class="meta-value">{{ cours.matiere }}</span>
        </div>
        <div class="meta-item">
          <span class="status-badge-large" [ngClass]="'status-' + cours.statut">
            {{ cours.statut }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN CONTAINER -->
  <div class="detail-container">
    
    <!-- RESOURCES SECTION -->
    <section class="detail-section">
      <div class="section-header">
        <h2>üìö Ressources</h2>
        <p class="section-subtitle">{{ cours.ressources.length }} ressource(s)</p>
      </div>

      <div class="table-wrapper" *ngIf="cours.ressources.length > 0">
        <table class="detail-table">
          <thead>
            <tr>
              <th>Ressource</th>
              <th>Type</th>
              <th>Statut</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let r of cours.ressources" class="table-row">
              <td data-label="Ressource" class="cell-title">{{ r.titre }}</td>
              <td data-label="Type">
                <span class="badge badge-type">{{ r.type }}</span>
              </td>
              <td data-label="Statut">
                <span class="status-badge" [ngClass]="'status-' + r.statut">
                  {{ r.statut }}
                </span>
              </td>
              <td data-label="Actions" class="cell-actions">
                <button *ngIf="r.statut==='en attente'" 
                        class="btn-action btn-validate" 
                        (click)="validerItem(r)"
                        title="Valider">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                  </svg>
                </button>
                <button *ngIf="r.statut==='en attente'" 
                        class="btn-action btn-reject" 
                        (click)="rejeterItem(r)"
                        title="Rejeter">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>
                  </svg>
                </button>
                <button class="btn-action btn-edit" 
                        (click)="modifierItem(r)"
                        title="Modifier">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/>
                    <path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                  </svg>
                </button>
                <button class="btn-action btn-delete" 
                        (click)="supprimerItem(cours.ressources, r)"
                        title="Supprimer">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-9l-1 1H5v2h14V4z"/>
                  </svg>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="cours.ressources.length === 0" class="empty-table">
        <p>Aucune ressource pour ce cours</p>
      </div>
    </section>

    <!-- QUIZ SECTION -->
    <section class="detail-section">
      <div class="section-header">
        <h2>‚ùì Quiz</h2>
        <p class="section-subtitle">{{ cours.quiz.length }} quiz</p>
      </div>

      <div class="table-wrapper" *ngIf="cours.quiz.length > 0">
        <table class="detail-table">
          <thead>
            <tr>
              <th>Quiz</th>
              <th>Questions</th>
              <th>Statut</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let q of cours.quiz" class="table-row">
              <td data-label="Quiz" class="cell-title">{{ q.titre }}</td>
              <td data-label="Questions">
                <span class="badge badge-count">{{ q.nombreQuestions }}</span>
              </td>
              <td data-label="Statut">
                <span class="status-badge" [ngClass]="'status-' + q.statut">
                  {{ q.statut }}
                </span>
              </td>
              <td data-label="Actions" class="cell-actions">
                <button *ngIf="q.statut==='en attente'" 
                        class="btn-action btn-validate" 
                        (click)="validerItem(q)"
                        title="Valider">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                  </svg>
                </button>
                <button *ngIf="q.statut==='en attente'" 
                        class="btn-action btn-reject" 
                        (click)="rejeterItem(q)"
                        title="Rejeter">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>
                  </svg>
                </button>
                <button class="btn-action btn-edit" 
                        (click)="modifierItem(q)"
                        title="Modifier">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/>
                    <path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                  </svg>
                </button>
                <button class="btn-action btn-delete" 
                        (click)="supprimerItem(cours.quiz, q)"
                        title="Supprimer">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-9l-1 1H5v2h14V4z"/>
                  </svg>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="cours.quiz.length === 0" class="empty-table">
        <p>Aucun quiz pour ce cours</p>
      </div>
    </section>

    <!-- EXAMS SECTION -->
    <section class="detail-section">
      <div class="section-header">
        <h2>üìù Examens</h2>
        <p class="section-subtitle">{{ cours.examens.length }} examen(s)</p>
      </div>

      <div class="table-wrapper" *ngIf="cours.examens.length > 0">
        <table class="detail-table">
          <thead>
            <tr>
              <th>Examen</th>
              <th>Date</th>
              <th>Statut</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let e of cours.examens" class="table-row">
              <td data-label="Examen" class="cell-title">{{ e.titre }}</td>
              <td data-label="Date">
                <span class="badge badge-date">{{ e.date }}</span>
              </td>
              <td data-label="Statut">
                <span class="status-badge" [ngClass]="'status-' + e.statut">
                  {{ e.statut }}
                </span>
              </td>
              <td data-label="Actions" class="cell-actions">
                <button *ngIf="e.statut==='en attente'" 
                        class="btn-action btn-validate" 
                        (click)="validerItem(e)"
                        title="Valider">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                  </svg>
                </button>
                <button *ngIf="e.statut==='en attente'" 
                        class="btn-action btn-reject" 
                        (click)="rejeterItem(e)"
                        title="Rejeter">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>
                  </svg>
                </button>
                <button class="btn-action btn-edit" 
                        (click)="modifierItem(e)"
                        title="Modifier">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/>
                    <path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                  </svg>
                </button>
                <button class="btn-action btn-delete" 
                        (click)="supprimerItem(cours.examens, e)"
                        title="Supprimer">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-9l-1 1H5v2h14V4z"/>
                  </svg>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="cours.examens.length === 0" class="empty-table">
        <p>Aucun examen pour ce cours</p>
      </div>
    </section>

  </div>
</div>
