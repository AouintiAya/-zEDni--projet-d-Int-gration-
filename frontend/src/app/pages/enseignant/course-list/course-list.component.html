<div class="courses-container">
  <!-- Header -->
  <div class="courses-header">
    <div>
      <h1>Mes cours</h1>
      <p class="subtitle">Gérez et organisez tous vos cours</p>
    </div>
    <button class="add-course-btn" (click)="createCourse()">+ Ajouter un cours</button>
  </div>

  <!-- Search -->
  <div class="search-section">
    <input
      type="text"
      placeholder="Rechercher un cours..."
      [(ngModel)]="searchQuery"
      (input)="onSearch()"
      class="search-input"
    />
  </div>

  <!-- Courses Table -->
  <div class="courses-table-wrapper">
    <table class="courses-table" *ngIf="filteredCourses.length > 0">
      <thead>
        <tr>
          <th>Titre du cours</th>
          <th>Nombre de ressources</th>
          <th>Enseignant</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let course of filteredCourses" class="course-row">
  <td class="course-title-col">
    <img [src]="'http://localhost:9091' + course.imageUrl" />

    <!-- MODE NORMAL -->
    <div *ngIf="editingCourseId !== course.id">
      <p class="course-title">{{ course.titre }}</p>
      <p class="course-desc">{{ course.description }}</p>
    </div>

    <!-- MODE EDIT -->
    <div *ngIf="editingCourseId === course.id">
      <input type="text" [(ngModel)]="editData.titre" placeholder="Titre du cours" />
      <textarea [(ngModel)]="editData.description" placeholder="Description"></textarea>
      <input type="file" (change)="onFileSelected($event)" />
    </div>
  </td>

  <td>{{ course.ressources?.length || 0 }}</td>
  <td>{{ course.enseignantEmail }}</td>

  <td class="actions-col">
 <!-- View Details -->
  <button class="action-btn view-btn" (click)="viewCourse(course.id!)">
    <i class="fas fa-eye"></i>
  </button>
    <!-- Edit -->
    <button class="action-btn edit-btn"
      *ngIf="editingCourseId !== course.id"
      (click)="startEditCourse(course)">
      <i class="fas fa-edit"></i>
    </button>

    <!-- Save -->
    <button class="action-btn save-btn"
      *ngIf="editingCourseId === course.id"
      (click)="updateCourse(course)">
      <i class="fas fa-save"></i>
    </button>

    <!-- Cancel -->
    <button class="action-btn cancel-btn"
      *ngIf="editingCourseId === course.id"
      (click)="cancelEditCourse()">
      <i class="fas fa-times"></i>
    </button>

    <!-- Delete -->
    <button class="action-btn delete-btn" (click)="deleteCourse(course.id!)">
      <i class="fas fa-trash"></i>
    </button>

  </td>
</tr>

      </tbody>
    </table>

    <div *ngIf="filteredCourses.length === 0" class="empty-state">
      <i class="fas fa-inbox"></i>
      <p>Aucun cours trouvé</p>
      <p class="empty-hint">Créez votre premier cours pour commencer</p>
    </div>
  </div>
</div>
