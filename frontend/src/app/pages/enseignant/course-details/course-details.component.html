<div class="course-details-container" *ngIf="!loading && course">
  <h1 class="course-title">{{ course.titre }}</h1>

  <!-- Image du cours avec fallback -->
  <img
    [src]="'http://localhost:9091' + course.imageUrl"
    [alt]="course.titre"
    class="course-image"
  />

  <!-- Description -->
  <p class="course-description">{{ course.description }}</p>
  <!-- Liste des ressources -->
  <div class="course-resources">
    <p><strong>Ressource de cours :</strong></p>

    <div *ngIf="ressources.length === 0">Aucune ressource disponible.</div>

    <ul *ngIf="ressources.length > 0">
      <li *ngFor="let r of ressources">
        <strong>{{ r.titre }}</strong> ({{ r.type }})
        <a *ngIf="r.type === 'LINK'" [href]="r.url" target="_blank">Voir</a>
        <a
          *ngIf="r.type === 'PDF' || r.type === 'VIDEO'"
          [href]="'http://localhost:9091' + r.url"
          target="_blank"
          >Télécharger</a
        >
      </li>
    </ul>
  </div>

  <!-- Infos complémentaires -->
  <div class="course-info">
    <p><strong>Enseignant :</strong> {{ course.enseignantEmail }}</p>
    <p>
      <strong>Nombre de ressources :</strong>
      {{ course.ressources?.length || 0 }}
    </p>
    <p>
      <strong>Nombre d’étudiants inscrits :</strong>
      {{ course.etudiantsCount || 0 }}
    </p>
  </div>

  <!-- Boutons d’action -->
  <div class="actions-buttons">
    <button class="btn btn-primary" (click)="seeQuiz()">Voir Quiz</button>
    <button class="btn btn-secondary" (click)="seeExam()">Voir Examen</button>
    <button class="btn btn-success" (click)="addResource()">
      Ajouter Ressource
    </button>
    <button class="btn btn-light" (click)="goBack()">Retour à la liste</button>
  </div>
</div>

<!-- Affichage pendant le chargement -->
<div *ngIf="loading" class="loading-state">
  <p>Chargement du cours...</p>
</div>

<!-- Affichage si le cours est introuvable -->
<div *ngIf="!loading && !course" class="empty-state">
  <p>Cours introuvable.</p>
</div>
