<!-- Create Quiz Page -->
<div class="create-quiz-wrapper">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <button class="btn-back" (click)="goBack()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Retour
      </button>
      <div class="header-title">
        <h1>Cr√©er un nouveau quiz</h1>
        <p class="subtitle">√âvaluez les connaissances de vos √©tudiants</p>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="create-quiz-container">
    <div class="form-wrapper">
      <!-- Left Section - Form -->
      <div class="form-section">
        <form [formGroup]="quizForm" (ngSubmit)="onSubmit()" class="quiz-form">
          
          <!-- Quiz Title Section -->
          <div class="form-group">
            <label for="titre" class="form-label">
              <span class="label-text">Titre du quiz</span>
              <span class="required">*</span>
            </label>
            <input
              id="titre"
              type="text"
              formControlName="titre"
              placeholder="Ex: Quiz sur les fondamentaux d'Angular"
              class="form-input"
              [class.error]="quizForm.get('titre')?.invalid && quizForm.get('titre')?.touched"
            />
            <div *ngIf="quizForm.get('titre')?.invalid && quizForm.get('titre')?.touched" class="error-message">
              <span *ngIf="quizForm.get('titre')?.errors?.['required']">Le titre est requis</span>
              <span *ngIf="quizForm.get('titre')?.errors?.['minlength']">Au moins 3 caract√®res</span>
            </div>
          </div>

          <!-- Questions Section Header -->
          <div class="questions-header">
            <h2 class="section-title">Questions du quiz</h2>
            <span class="question-count">{{ questions.length }} question(s)</span>
          </div>

          <!-- Questions List -->
          <div class="questions-container">
            <div class="question-card" *ngFor="let q of questions; let i = index" [@slideIn]>
              <div class="question-header">
                <div class="question-number">Question {{ i + 1 }}</div>
                <button type="button" class="btn-remove" (click)="removeQuestion(i)" [disabled]="questions.length === 1">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    <line x1="10" y1="11" x2="10" y2="17"></line>
                    <line x1="14" y1="11" x2="14" y2="17"></line>
                  </svg>
                  Supprimer
                </button>
              </div>

              <div class="question-fields">
                <!-- Question Text -->
                <div class="field-group">
                  <label class="field-label">Texte de la question</label>
                  <textarea
                    [(ngModel)]="q.texte"
                    placeholder="Posez votre question ici..."
                    class="form-textarea"
                    rows="3"
                  ></textarea>
                </div>

                <!-- Correct Answer -->
                <div class="field-group">
                  <label class="field-label">R√©ponse correcte</label>
                  <input
                    type="text"
                    [(ngModel)]="q.reponseCorrecte"
                    placeholder="La r√©ponse correcte..."
                    class="form-input"
                  />
                </div>

                <!-- Additional Options (optional) -->
                <div class="field-group">
                  <label class="field-label">Options suppl√©mentaires</label>
                  <div class="options-hint">Vous pouvez ajouter d'autres r√©ponses pour les choix multiples</div>
                </div>
              </div>
            </div>

            <!-- Empty State -->
            <div *ngIf="questions.length === 0" class="empty-questions-state">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S15.33 8 14.5 8 13 8.67 13 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S8.33 8 7.5 8 6 8.67 6 9.5 6.67 11 7.5 11z"/>
              </svg>
              <p>Aucune question ajout√©e</p>
            </div>
          </div>

          <!-- Add Question Button -->
          <button type="button" class="btn-add-question" (click)="addQuestion()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="16"/>
              <line x1="8" y1="12" x2="16" y2="12"/>
            </svg>
            Ajouter une question
          </button>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="submit" class="btn btn-primary" [disabled]="isSubmitting || questions.length === 0">
              <span *ngIf="!isSubmitting">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                Cr√©er le quiz
              </span>
              <span *ngIf="isSubmitting">
                <svg class="btn-icon spinner" viewBox="0 0 24 24">
                  <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/>
                </svg>
                Cr√©ation en cours...
              </span>
            </button>
            <button type="button" class="btn btn-secondary" (click)="resetForm()">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36M20.49 15a9 9 0 0 1-14.85 3.36"/>
              </svg>
              R√©initialiser
            </button>
          </div>
        </form>
      </div>

      <!-- Right Section - Info Panel -->
      <div class="info-section">
        <div class="info-card">
          <div class="info-icon">‚ùì</div>
          <h3>Cr√©er un bon quiz</h3>
          <ul class="tips-list">
            <li><strong>Questions claires:</strong> Posez des questions sans ambigu√Øt√©</li>
            <li><strong>R√©ponses exactes:</strong> Assurez-vous que les r√©ponses sont pr√©cises</li>
            <li><strong>Vari√©t√©:</strong> M√©langez les types de questions</li>
            <li><strong>Pertinence:</strong> Liez les questions au contenu du cours</li>
          </ul>
        </div>

        <div class="info-card">
          <div class="info-icon">üìä</div>
          <h3>√âvaluation efficace</h3>
          <p>Un bon quiz contient g√©n√©ralement 5 √† 10 questions pour une √©valuation rapide et efficace des connaissances.</p>
        </div>

        <div class="info-card success-card">
          <div class="info-icon">üéì</div>
          <h3>Engagement √©tudiant</h3>
          <p>Les quiz interactifs augmentent l'engagement et la r√©tention des connaissances de 35%.</p>
        </div>

        <div class="info-card">
          <div class="info-icon">‚è±Ô∏è</div>
          <h3>Conseil de temps</h3>
          <p>R√©servez environ 2-3 minutes par question pour laisser le temps aux √©tudiants de r√©fl√©chir.</p>
        </div>
      </div>
    </div>
  </div>
</div>
